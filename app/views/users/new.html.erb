<div class="session__container">
    <h1 class="habits__title">Sign up</h1>

    <% if flash[:alert] %>
    <%= render "shared/notice", status: "error", title: flash[:alert] %>
    <% end %>
    <% if flash[:notice] %>
    <%= render "shared/notice", status: "success", title: flash[:notice] %>
    <% end %>

    <%= form_with(model: @user, class: "form session__form--withBackground") do |form| %>
    <% if @user.errors.any? %>
    <%= render "shared/notice", status: "error", title: pluralize(@user.errors.count, "error") + " prohibited this account from being created:" do %>
    <ul>
        <% @user.errors.each do |error| %>
        <li><%= error.full_message %></li>
        <% end %>
    </ul>
    <% end %>
    <% end %>

    <div class="form__field session__formField">
        <%= form.email_field :email_address, required: true, autofocus: true, autocomplete: "username", placeholder: "Enter your email address" %>
    </div>

    <div class="form__field session__formField">
        <%= form.password_field :password, required: true, autocomplete: "new-password", placeholder: "Enter your password", maxlength: 72 %>
    </div>

    <div class="form__field session__formField">
        <%= form.password_field :password_confirmation, required: true, autocomplete: "new-password", placeholder: "Confirm your password", maxlength: 72 %>
    </div>

    <%= form.submit "Sign up", class: "button session__submitButton" %>
    <% end %>
    <br>

    <%= link_to "Already have an account? Sign in", new_session_path, class: "session__link" %>
</div>